<!DOCTYPE html>
<html lang="pt-BR"> <!-- Define o idioma como portugu√™s do Brasil -->
<head>
  <meta charset="UTF-8"> <!-- Suporte a acentos -->
  <title>Snake Game</title>
  <style>
    /* === ESTILOS GERAIS === */
    body {
      font-family: Arial, sans-serif; /* Fonte usada no jogo */
      background: #222;               /* Fundo cinza escuro */
      color: #fff;                    /* Texto branco */
      text-align: center;             /* Centraliza textos */
      margin: 0;                      /* Remove margens padr√£o */
      display: flex;                  /* Usa Flexbox */
      flex-direction: column;         /* Organiza elementos em coluna */
      align-items: center;            /* Centraliza horizontalmente */
      justify-content: flex-start;    /* Alinha topo verticalmente */
      height: 100vh;                  /* Ocupa toda altura da tela */
    }

    header { margin: 10px; } /* Espa√ßo ao redor do cabe√ßalho */

    #gameCanvas {
      background: #111;         /* Fundo do campo de jogo */
      border: 2px solid #0f0;   /* Borda verde neon */
    }

    .overlay {
      position: fixed;                 /* Sempre fixa na tela */
      top: 0; left: 0;                 /* Come√ßa no canto superior esquerdo */
      width: 100%; height: 100%;       /* Ocupa tela inteira */
      background: rgba(0,0,0,0.85);    /* Fundo preto transparente */
      display: flex;                   /* Flexbox para centralizar */
      align-items: center;             /* Centraliza verticalmente */
      justify-content: center;         /* Centraliza horizontalmente */
    }

    .panel {
      background: #333;                /* Caixa cinza escura */
      padding: 20px;                   /* Espa√ßamento interno */
      border-radius: 12px;             /* Cantos arredondados */
      box-shadow: 0 0 12px #0f0;       /* Sombra verde */
    }

    button {
      padding: 10px 20px;     /* Tamanho do bot√£o */
      margin: 8px;            /* Espa√ßo externo */
      font-size: 16px;        /* Tamanho da fonte */
      border: none;           /* Remove borda padr√£o */
      border-radius: 6px;     /* Arredonda o bot√£o */
      cursor: pointer;        /* Mostra cursor de m√£o */
      background: #0f0;       /* Fundo verde */
      color: #000;            /* Texto preto */
      font-weight: bold;      /* Negrito */
    }
    button:hover { background: #3f3; } /* Verde mais claro ao passar o mouse */
  </style>
</head>
<body>
  <!-- Cabe√ßalho com t√≠tulo e HUD -->
  <header>
    <h1>üêç Snake Game</h1>
    <p>Pontua√ß√£o: <span id="score">0</span> | Vidas: <span id="lives">0</span></p>
  </header>

  <!-- √Årea do jogo -->
  <canvas id="gameCanvas" width="400" height="400"></canvas>

  <!-- Tela inicial -->
  <div id="startScreen" class="overlay">
    <div class="panel">
      <h2>Bem-vindo ao Snake!</h2>
      <p>Digite o n√∫mero de vidas e clique em Start.</p>
      <input type="number" id="lifeInput" min="1" max="5" value="3" /> <!-- Entrada de vidas -->
      <br><br>
      <button onclick="startGame()">Start</button> <!-- Bot√£o para iniciar -->
    </div>
  </div>

  <!-- Tela de Game Over -->
  <div id="gameOverScreen" class="overlay" style="display:none;">
    <div class="panel">
      <h2>Game Over</h2>
      <p id="finalScore">Sua pontua√ß√£o foi: 0</p>
      <button onclick="restartGame()">Jogar Novamente</button>
    </div>
  </div>

  <!-- Sons -->
  <audio id="bgMusic" src="snake-fundo.mp3" loop></audio> <!-- M√∫sica de fundo -->
  <audio id="eatSound" src="eat-snake.mp3"></audio>       <!-- Som ao comer -->
  <audio id="gameOverSound" src="game over-snake.mp3"></audio> <!-- Som ao perder -->

  <script>
    // === VARI√ÅVEIS PRINCIPAIS ===
    const canvas = document.getElementById("gameCanvas"); // Pega o canvas
    const ctx = canvas.getContext("2d"); // Contexto 2D para desenhar
    const scoreEl = document.getElementById("score"); // Span da pontua√ß√£o
    const livesEl = document.getElementById("lives"); // Span das vidas
    const startScreen = document.getElementById("startScreen"); // Tela inicial
    const gameOverScreen = document.getElementById("gameOverScreen"); // Tela de Game Over
    const finalScore = document.getElementById("finalScore"); // Texto do placar final

    // Sons
    const bgMusic = document.getElementById("bgMusic");
    const eatSound = document.getElementById("eatSound");
    const gameOverSound = document.getElementById("gameOverSound");

    // Vari√°veis de controle do jogo
    let snake = [];            // Array que guarda as partes da cobra
    let direction = "RIGHT";   // Dire√ß√£o inicial
    let food = {};             // Posi√ß√£o da comida
    let score = 0;             // Pontua√ß√£o
    let lives = 3;             // N√∫mero de vidas
    let box = 20;              // Tamanho de cada quadrado (20px)
    let gameInterval;          // Intervalo do loop do jogo

    // === FUN√á√ÉO: INICIAR O JOGO ===
    function startGame() {
      const lifeInput = document.getElementById("lifeInput").value; // L√™ vidas do input
      lives = parseInt(lifeInput) || 3; // Se inv√°lido, usa 3 como padr√£o
      score = 0; // Zera pontos
      snake = [{x: 9*box, y:10*box}]; // Posi√ß√£o inicial da cobra
      direction = "RIGHT"; // Dire√ß√£o inicial
      spawnFood(); // Gera primeira comida
      updateHUD(); // Atualiza HUD
      startScreen.style.display = "none"; // Esconde tela inicial
      gameOverScreen.style.display = "none"; // Esconde Game Over
      clearInterval(gameInterval); // Garante que n√£o h√° loops antigos
      gameInterval = setInterval(draw, 150); // Chama fun√ß√£o draw a cada 150ms

      // M√∫sica de fundo
      bgMusic.currentTime = 0;
      bgMusic.play();
    }

    // === FUN√á√ÉO: VOLTAR AO MENU ===
    function restartGame() {
      gameOverScreen.style.display = "none";
      startScreen.style.display = "flex";
    }

    // === FUN√á√ÉO: ATUALIZAR HUD ===
    function updateHUD() {
      scoreEl.textContent = score;
      livesEl.textContent = lives;
    }

    // === FUN√á√ÉO: GERAR COMIDA EM POSI√á√ÉO ALEAT√ìRIA ===
    function spawnFood() {
      food = {
        x: Math.floor(Math.random() * (canvas.width/box)) * box,
        y: Math.floor(Math.random() * (canvas.height/box)) * box
      };
    }

    // === CONTROLE DA COBRA (teclado) ===
    document.addEventListener("keydown", e => {
      if(e.key === "ArrowLeft" && direction !== "RIGHT") direction = "LEFT";
      else if(e.key === "ArrowUp" && direction !== "DOWN") direction = "UP";
      else if(e.key === "ArrowRight" && direction !== "LEFT") direction = "RIGHT";
      else if(e.key === "ArrowDown" && direction !== "UP") direction = "DOWN";
    });

    // === LOOP DO JOGO ===
    function draw() {
      // Fundo
      ctx.fillStyle = "#111";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Desenha cobra
      for (let i = 0; i < snake.length; i++) {
        ctx.fillStyle = (i === 0) ? "#0f0" : "#fff"; // Cabe√ßa verde, corpo branco
        ctx.fillRect(snake[i].x, snake[i].y, box, box);
        ctx.strokeStyle = "#000";
        ctx.strokeRect(snake[i].x, snake[i].y, box, box);
      }

      // Desenha comida
      ctx.fillStyle = "#f00"; // Vermelha
      ctx.fillRect(food.x, food.y, box, box);

      // Posi√ß√£o da cabe√ßa
      let snakeX = snake[0].x;
      let snakeY = snake[0].y;

      // Movimento
      if (direction === "LEFT") snakeX -= box;
      if (direction === "UP") snakeY -= box;
      if (direction === "RIGHT") snakeX += box;
      if (direction === "DOWN") snakeY += box;

      // Se comer comida
      if (snakeX === food.x && snakeY === food.y) {
        score += 10;       // Soma pontos
        eatSound.play();   // Toca som
        spawnFood();       // Gera nova comida
      } else {
        snake.pop();       // Remove cauda se n√£o comer
      }

      const newHead = { x: snakeX, y: snakeY }; // Nova posi√ß√£o da cabe√ßa

      // === COLIS√ïES ===
      if (
        snakeX < 0 || snakeY < 0 || // Bateu fora da tela
        snakeX >= canvas.width || snakeY >= canvas.height || // Borda direita/baixo
        collision(newHead, snake) // Bateu no pr√≥prio corpo
      ) {
        lives--; // Perde uma vida

        if (lives > 0) {
          // Reinicia a cobra no centro
          snake = [{ x: 9 * box, y: 10 * box }];
          direction = "RIGHT";
          updateHUD();
          return; // Sai sem acabar o jogo
        } else {
          // Se acabou as vidas -> Game Over
          clearInterval(gameInterval);
          finalScore.textContent = "Sua pontua√ß√£o foi: " + score;
          bgMusic.pause();
          gameOverSound.play();
          gameOverScreen.style.display = "flex";
          return;
        }
      }

      // Adiciona nova cabe√ßa ao corpo
      snake.unshift(newHead);
      updateHUD(); // Atualiza HUD
    }

    // === FUN√á√ÉO: DETECTAR COLIS√ÉO COM O CORPO ===
    function collision(head, array) {
      for(let i=0; i<array.length; i++) {
        if(head.x === array[i].x && head.y === array[i].y) return true;
      }
      return false;
    }
  </script>
</body>
</html>
